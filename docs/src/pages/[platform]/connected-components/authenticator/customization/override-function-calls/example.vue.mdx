import { Tabs, Alert } from '@aws-amplify/ui-react';
import { CURRENT_MAJOR_VERSIONS, PREV_MAJOR_VERSIONS } from '@/data/frameworks';

export const latestVersion = CURRENT_MAJOR_VERSIONS['vue'];
export const prevVersion = PREV_MAJOR_VERSIONS['vue'];

  <Tabs.Container defaultValue={latestVersion}>
    <Tabs.List>
      <Tabs.Item value={latestVersion}>`@aws-amplify/ui-vue` v{latestVersion} (latest)</Tabs.Item>
      <Tabs.Item value={prevVersion}>`@aws-amplify/ui-vue` v{prevVersion}</Tabs.Item>
    </Tabs.List>
    <Tabs.Panel value={latestVersion}>
    In `@aws-amplify/ui-vue` version {latestVersion}, `Auth` function calls are imported directly as shown below. 
    ```html
    <script setup lang="ts">
    import { Amplify } from 'aws-amplify';
    import { signUp, SignUpInput } from 'aws-amplify/auth';
    import { Authenticator } from '@aws-amplify/ui-vue';
    import '@aws-amplify/ui-vue/styles.css';
    import aws_exports from './aws-exports';

    Amplify.configure(aws_exports);

    const services = {
      async handleSignUp(input: SignUpInput) {
        // custom username and email
        const { username, options } = input
        const customUsername = username.toLowerCase();
        const customEmail = options?.userAttributes?.email?.toLowerCase();
        return signUp({
          ...input,
          username: customUsername,
          options: {
            ...options,
            userAttributes: {
              ...options?.userAttributes,
              email: customEmail,
            },
          },
        });
      },
    };
    </script>

    <template>
      <authenticator :services="services" initial-state="signUp">
        <template v-slot="{ user, signOut }">
          <h1>Hello {{ user.username }}!</h1>
          <button @click="signOut">Sign Out</button>
        </template>
      </authenticator>
    </template>
    ```
    </Tabs.Panel>
    <Tabs.Panel value={prevVersion}>
      <Alert role="none" variation="warning" heading="Sign Up Auto Sign In">
        If you're overriding `signUp` in `@aws-amplify/ui-vue` **version {prevVersion} or earlier**, you must include the `autoSignIn` key and set `enabled` to true, as shown in the example below.
      </Alert>
      In `@aws-amplify/ui-vue` version {prevVersion} or earlier, `Auth` function calls are imported from the `Auth` object.
      ```html{}
      <script setup lang="ts">
        import { Amplify, Auth } from 'aws-amplify';
        import { Authenticator } from '@aws-amplify/ui-vue';
        import '@aws-amplify/ui-vue/styles.css';
        import aws_exports from './aws-exports';
        Amplify.configure(aws_exports);

        const services = {
          async handleSignUp(formData) {
            let { username, password, attributes } = formData;
            // custom username
            username = username.toLowerCase();
            attributes.email = attributes.email.toLowerCase();
            return Auth.signUp({
              username,
              password,
              attributes,
              autoSignIn: {
                enabled: true,
              },
            });
          },
        };
      </script>

      <template>
        <authenticator :services="services" initial-state="signUp">
          <template v-slot="{ user, signOut }">
            <h1>Hello {{ user.username }}!</h1>
            <button @click="signOut">Sign Out</button>
          </template>
        </authenticator>
      </template>
      ```
    </Tabs.Panel>
  </Tabs.Container>